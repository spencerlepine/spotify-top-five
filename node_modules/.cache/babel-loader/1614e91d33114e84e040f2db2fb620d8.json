{"ast":null,"code":"import _slicedToArray from\"/Users/notspencer/Downloads/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import parseCallBack from\"./parseCallback\";import{jsx as _jsx}from\"react/jsx-runtime\";function LoginButton(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),promptLogin=_useState2[0],setPromptLogin=_useState2[1];useEffect(function(){var validToken=parseCallBack(window.location.href);if(validToken){props.saveToken(validToken);window.location.hash='';// App will rerender with just .location\n}else{setPromptLogin(true);}},[]);function connectSpotify(){//var stateKey = 'spotify_auth_state';\nvar client_id='0d539539a02d47a8842d93141f6b6984';var redirect_uri='http://localhost:3000/callback';//var state = generateRandomString(16);\n//localStorage.setItem(stateKey, state);\n// https://developer.spotify.com/documentation/general/guides/scopes/\nvar scope='user-read-private user-read-email user-read-playback-state';var url='https://accounts.spotify.com/authorize';url+='?response_type=token';url+='&client_id='+encodeURIComponent(client_id);url+='&scope='+encodeURIComponent(scope);url+='&redirect_uri='+encodeURIComponent(redirect_uri);//url += '&state=' + encodeURIComponent(state);\nwindow.location=url;}return/*#__PURE__*/_jsx(\"div\",{className:\"accountStatus\",children:promptLogin&&/*#__PURE__*/_jsx(\"button\",{onClick:connectSpotify,children:\"Connect Account\"})});}export default LoginButton;","map":{"version":3,"sources":["/Users/notspencer/Downloads/client/src/components/LoginButton.js"],"names":["React","useState","useEffect","parseCallBack","LoginButton","props","promptLogin","setPromptLogin","validToken","window","location","href","saveToken","hash","connectSpotify","client_id","redirect_uri","scope","url","encodeURIComponent"],"mappings":"yJAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,C,2CAEA,QAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA4B,eACcJ,QAAQ,CAAC,IAAD,CADtB,wCACjBK,WADiB,eACJC,cADI,eAGxBL,SAAS,CAAC,UAAM,CACZ,GAAMM,CAAAA,UAAU,CAAGL,aAAa,CAACM,MAAM,CAACC,QAAP,CAAgBC,IAAjB,CAAhC,CAEA,GAAIH,UAAJ,CAAgB,CACZH,KAAK,CAACO,SAAN,CAAgBJ,UAAhB,EACAC,MAAM,CAACC,QAAP,CAAgBG,IAAhB,CAAuB,EAAvB,CAA0B;AAC7B,CAHD,IAGO,CACHN,cAAc,CAAC,IAAD,CAAd,CACH,CACJ,CATQ,CASN,EATM,CAAT,CAWA,QAASO,CAAAA,cAAT,EAA0B,CACtB;AAEA,GAAMC,CAAAA,SAAS,CAAG,kCAAlB,CACA,GAAMC,CAAAA,YAAY,CAAG,gCAArB,CAEA;AACA;AAEA;AACA,GAAIC,CAAAA,KAAK,CAAG,4DAAZ,CAEA,GAAIC,CAAAA,GAAG,CAAG,wCAAV,CACAA,GAAG,EAAI,sBAAP,CACAA,GAAG,EAAI,cAAgBC,kBAAkB,CAACJ,SAAD,CAAzC,CACAG,GAAG,EAAI,UAAYC,kBAAkB,CAACF,KAAD,CAArC,CACAC,GAAG,EAAI,iBAAmBC,kBAAkB,CAACH,YAAD,CAA5C,CACA;AAEAP,MAAM,CAACC,QAAP,CAAkBQ,GAAlB,CACH,CAED,mBACI,YAAK,SAAS,CAAC,eAAf,UACKZ,WAAW,eAAI,eAAQ,OAAO,CAAEQ,cAAjB,6BADpB,EADJ,CAKH,CAED,cAAeV,CAAAA,WAAf","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport parseCallBack from \"./parseCallback\"\n\nfunction LoginButton(props) {\n    const [promptLogin, setPromptLogin] = useState(true);\n\n    useEffect(() => {\n        const validToken = parseCallBack(window.location.href);\n\n        if (validToken) {\n            props.saveToken(validToken)\n            window.location.hash = '' // App will rerender with just .location\n        } else {\n            setPromptLogin(true);\n        }\n    }, [])\n\n    function connectSpotify() {\n        //var stateKey = 'spotify_auth_state';\n\n        const client_id = '0d539539a02d47a8842d93141f6b6984'; \n        const redirect_uri = 'http://localhost:3000/callback'; \n\n        //var state = generateRandomString(16);\n        //localStorage.setItem(stateKey, state);\n\n        // https://developer.spotify.com/documentation/general/guides/scopes/\n        var scope = 'user-read-private user-read-email user-read-playback-state';\n\n        var url = 'https://accounts.spotify.com/authorize';\n        url += '?response_type=token';\n        url += '&client_id=' + encodeURIComponent(client_id);\n        url += '&scope=' + encodeURIComponent(scope);\n        url += '&redirect_uri=' + encodeURIComponent(redirect_uri);\n        //url += '&state=' + encodeURIComponent(state);\n\n        window.location = url;\n    }\n\n    return (\n        <div className=\"accountStatus\">\n            {promptLogin && <button onClick={connectSpotify}>Connect Account</button>}\n        </div>\n    )\n}\n\nexport default LoginButton"]},"metadata":{},"sourceType":"module"}