{"ast":null,"code":"var _jsxFileName = \"/Users/notspencer/Downloads/client/src/components/SpotifyData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\nimport LoginButton from \"./LoginButton\";\nimport DisplayData from \"./DisplayData\";\nimport UserPlaylist from \"./UserPlaylist\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst spotifyWebApi = new SpotifyWebApi();\n/*\n    --Display current username\n    --Fetch and display list of Categories\n    --Save user category choice\n    --Fetch category playlists\n    --Get top artists from each\n    --Save to list of artist\n        *insert similar artist into list\n    --Display list of artists\n*/\n\nfunction SpotifyData() {\n  _s();\n\n  const [token, setToken] = useState(false);\n  const [currentUser, setCurrentUser] = useState();\n  const [availableCategories, setAvailableCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\n  const [categoryPlaylists, setCategoryPlaylists] = useState([]);\n  const [featuredArtists, setFeaturedArtists] = useState([]);\n  const [fetchingArtists, setFetchingArtists] = useState(true);\n  const [checkedArtists, setCheckedArtists] = useState([]);\n  const [finalPlaylist, setFinalPlaylist] = useState();\n\n  function getMe() {\n    spotifyWebApi.getMe().then(response => {\n      if (response) {\n        setCurrentUser(response.display_name);\n      }\n    });\n  }\n\n  function getCategories() {\n    spotifyWebApi.getCategories().then(response => {\n      if (response) {\n        setAvailableCategories(response.categories.items);\n      }\n    });\n  }\n\n  function getCategory(id) {\n    spotifyWebApi.getCategory(id).then(response => {\n      setSelectedCategory(response.name);\n      getCategoryPlaylists(response.id);\n    });\n  }\n\n  function getCategoryPlaylists(id) {\n    spotifyWebApi.getCategoryPlaylists(id).then(response => {\n      setCategoryPlaylists(response.playlists.items);\n    });\n  } // Overwrite featuredArtist array with full artist info\n\n\n  function getArtistImage(id, index) {\n    spotifyWebApi.getArtist(id).then(response => {\n      setFeaturedArtists(prevArray => {\n        let updatedList = [...prevArray];\n        updatedList[index] = response;\n        return updatedList;\n      });\n    });\n  }\n\n  function getPlaylistTracks(id) {\n    const lim = 5;\n    spotifyWebApi.getPlaylistTracks(id, {\n      limit: lim\n    }) // Only get 5 songs\n    .then(response => {\n      let startingTracks = response.items;\n\n      for (let i = 0; i < lim; i++) {\n        let thisArtist = startingTracks[i].track.artists[0];\n        setFeaturedArtists(prevArray => {\n          // Skip if this artist already was saved\n          for (let i = 0, l = prevArray.length; i < l; i++) {\n            if (prevArray[i].name === thisArtist.name) {\n              return prevArray;\n            }\n          } // Make a boolean array of the same length\n\n\n          setCheckedArtists(prevArray => [...prevArray, false]);\n          let updatedList = [...prevArray, {\n            id: thisArtist.id\n          }];\n          return updatedList;\n        });\n      }\n\n      setFetchingArtists(false);\n    });\n  }\n\n  function saveToken(token) {\n    spotifyWebApi.setAccessToken(token);\n    setToken(token);\n  } // Abstract the image fetching interations\n\n\n  function fetchProfiles() {\n    if (featuredArtists.length > 0) {\n      for (let i = 0, l = featuredArtists.length; i < l; i++) {\n        getArtistImage(featuredArtists[i].id, i);\n      }\n\n      setFetchingArtists(true);\n    }\n  }\n\n  function clickCategoryCard(id) {\n    getCategory(id);\n  } // Toggle function for card elements\n\n\n  function clickArtist(index) {\n    setCheckedArtists(prevArray => {\n      let newArray = [...prevArray];\n      newArray[index] = !prevArray[index];\n      return newArray;\n    });\n  }\n\n  function submitSelectedArtist() {\n    // Iterate through and select CHECKED artists\n    const finalList = checkedArtists.map((artist, index) => {\n      if (artist) {\n        return featuredArtists[index].name;\n      }\n    }).filter(artist => artist); //Reset the list\n\n    setCheckedArtists([]);\n    setFeaturedArtists([]);\n    setAvailableCategories([]);\n    setFinalPlaylist(finalList);\n  } // Go through the playlists of the selected category ONCE\n\n\n  useEffect(() => {\n    if (categoryPlaylists.length > 0) {\n      for (let i = 0, l = categoryPlaylists.length; i < l; i++) {\n        getPlaylistTracks(categoryPlaylists[i].id);\n      }\n\n      return;\n    }\n  }, [categoryPlaylists]); // Use fresh artist data to get their profile images\n\n  useEffect(() => {\n    if (!fetchingArtists) {\n      fetchProfiles();\n      return;\n    }\n  }, [featuredArtists]); // Start fetching data once the key is found ONCE\n\n  useEffect(() => {\n    if (token) {\n      getMe();\n      getCategories();\n      return;\n    }\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!token && /*#__PURE__*/_jsxDEV(LoginButton, {\n      saveToken: saveToken\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 24\n    }, this), token && /*#__PURE__*/_jsxDEV(DisplayData, {\n      clickArtist: clickArtist,\n      submitSelectedArtist: submitSelectedArtist,\n      clickCategoryCard: clickCategoryCard,\n      currentUser: currentUser,\n      availableCategories: availableCategories,\n      selectedCategory: selectedCategory,\n      categoryPlaylists: categoryPlaylists,\n      featuredArtists: featuredArtists,\n      checkedArtists: checkedArtists\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), finalPlaylist && /*#__PURE__*/_jsxDEV(UserPlaylist, {\n      finalPlaylist: finalPlaylist\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 31\n    }, this)]\n  }, void 0, true);\n}\n\n_s(SpotifyData, \"2D/hYwLrCdk2sobZ5+wwDlvxkek=\");\n\n_c = SpotifyData;\nexport default SpotifyData;\n\nvar _c;\n\n$RefreshReg$(_c, \"SpotifyData\");","map":{"version":3,"sources":["/Users/notspencer/Downloads/client/src/components/SpotifyData.js"],"names":["React","useState","useEffect","SpotifyWebApi","LoginButton","DisplayData","UserPlaylist","spotifyWebApi","SpotifyData","token","setToken","currentUser","setCurrentUser","availableCategories","setAvailableCategories","selectedCategory","setSelectedCategory","categoryPlaylists","setCategoryPlaylists","featuredArtists","setFeaturedArtists","fetchingArtists","setFetchingArtists","checkedArtists","setCheckedArtists","finalPlaylist","setFinalPlaylist","getMe","then","response","display_name","getCategories","categories","items","getCategory","id","name","getCategoryPlaylists","playlists","getArtistImage","index","getArtist","prevArray","updatedList","getPlaylistTracks","lim","limit","startingTracks","i","thisArtist","track","artists","l","length","saveToken","setAccessToken","fetchProfiles","clickCategoryCard","clickArtist","newArray","submitSelectedArtist","finalList","map","artist","filter"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport SpotifyWebApi from \"spotify-web-api-js\"\nimport LoginButton from \"./LoginButton\"\nimport DisplayData from \"./DisplayData\"\nimport UserPlaylist from \"./UserPlaylist\"\n\nconst spotifyWebApi = new SpotifyWebApi();\n\n/*\n    --Display current username\n    --Fetch and display list of Categories\n    --Save user category choice\n    --Fetch category playlists\n    --Get top artists from each\n    --Save to list of artist\n        *insert similar artist into list\n    --Display list of artists\n*/\n\nfunction SpotifyData() {\n    const [token, setToken] = useState(false) \n    const [currentUser, setCurrentUser] = useState()\n    const [availableCategories, setAvailableCategories] = useState([])\n    const [selectedCategory, setSelectedCategory] = useState(\"\")\n    const [categoryPlaylists, setCategoryPlaylists] = useState([])\n    const [featuredArtists, setFeaturedArtists] = useState([])\n    const [fetchingArtists, setFetchingArtists] = useState(true)\n    const [checkedArtists, setCheckedArtists] = useState([])\n    const [finalPlaylist, setFinalPlaylist] = useState()\n    \n    function getMe() {\n        spotifyWebApi.getMe()\n            .then((response) => {\n                if (response) {\n                    setCurrentUser(response.display_name)\n                } \n        });\n    }\n\n    function getCategories() {\n        spotifyWebApi.getCategories()\n            .then((response) => {\n                if (response) {\n                    setAvailableCategories(response.categories.items)\n                } \n        });\n    }\n    \n    function getCategory(id) {\n        spotifyWebApi.getCategory(id)\n            .then((response) => {\n                setSelectedCategory(response.name);\n                getCategoryPlaylists(response.id);\n        });\n    }\n\n    function getCategoryPlaylists(id) {\n        spotifyWebApi.getCategoryPlaylists(id)\n            .then((response) => {\n                setCategoryPlaylists(response.playlists.items);\n        });\n    }\n\n    // Overwrite featuredArtist array with full artist info\n    function getArtistImage(id, index) {\n        spotifyWebApi.getArtist(id)\n            .then((response) => {\n                setFeaturedArtists((prevArray) => {\n                    let updatedList = [...prevArray]\n                    updatedList[index] = response\n\n                    return updatedList\n                })\n        });\n    }\n\n    function getPlaylistTracks(id) {\n        const lim = 5;\n\n        spotifyWebApi.getPlaylistTracks(id, {limit: lim}) // Only get 5 songs\n            .then((response) => {\n                let startingTracks = response.items;\n\n                for (let i = 0; i < lim; i++) {\n                    let thisArtist = startingTracks[i].track.artists[0];\n\n                    setFeaturedArtists((prevArray) => {\n                        // Skip if this artist already was saved\n                        for (let i = 0, l = prevArray.length; i < l; i++) {\n                            if (prevArray[i].name === thisArtist.name) {\n                                return prevArray\n                            }\n                        }\n                       \n                        // Make a boolean array of the same length\n                        setCheckedArtists((prevArray) => [...prevArray, false])\n                        let updatedList = [...prevArray, {id: thisArtist.id}]\n                        return updatedList\n                    })\n                }\n                setFetchingArtists(false)\n        });\n    }\n\n    function saveToken(token) {\n        spotifyWebApi.setAccessToken(token);\n        setToken(token);\n    }\n    \n    // Abstract the image fetching interations\n    function fetchProfiles() {\n        if (featuredArtists.length > 0) {\n            for (let i = 0, l = featuredArtists.length; i < l; i++) {\n                getArtistImage(featuredArtists[i].id, i)\n            }\n            setFetchingArtists(true)\n        }\n    }\n\n    function clickCategoryCard(id) {\n        getCategory(id)\n    }\n    \n    // Toggle function for card elements\n    function clickArtist(index) {\n        setCheckedArtists((prevArray) => {\n            let newArray = [...prevArray]\n            newArray[index] = !prevArray[index]\n            return newArray\n        })\n    }\n\n    function submitSelectedArtist() {\n        // Iterate through and select CHECKED artists\n        const finalList = checkedArtists.map((artist, index) => {\n            if (artist) {\n                return featuredArtists[index].name\n            }\n        }).filter(artist => artist);\n\n        //Reset the list\n        setCheckedArtists([])\n        setFeaturedArtists([])\n        setAvailableCategories([])\n\n        setFinalPlaylist(finalList);\n    }\n\n    // Go through the playlists of the selected category ONCE\n    useEffect(() => {\n        if (categoryPlaylists.length > 0) {\n            for (let i = 0, l = categoryPlaylists.length; i < l; i++) {\n                getPlaylistTracks(categoryPlaylists[i].id)\n            }\n            return\n        }\n    }, [categoryPlaylists])\n\n    // Use fresh artist data to get their profile images\n    useEffect(() => {\n        if (!fetchingArtists) {\n            fetchProfiles();\n            return\n        }\n    }, [featuredArtists])\n\n    // Start fetching data once the key is found ONCE\n    useEffect(() => {\n        if (token) {\n            getMe()\n            getCategories()\n            return\n        }\n    }, [token])\n\n    return (\n        <>\n            {!token && <LoginButton saveToken={saveToken} />}\n            \n            {token &&\n            <DisplayData \n                clickArtist={clickArtist}\n                submitSelectedArtist={submitSelectedArtist}\n                clickCategoryCard={clickCategoryCard}\n                currentUser={currentUser}\n                availableCategories={availableCategories}\n                selectedCategory={selectedCategory}\n                categoryPlaylists={categoryPlaylists}\n                featuredArtists={featuredArtists}\n                checkedArtists={checkedArtists}\n            />}\n\n            {finalPlaylist && <UserPlaylist finalPlaylist={finalPlaylist} />}\n        </>\n    )\n}\n\nexport default SpotifyData\n"]},"metadata":{},"sourceType":"module"}